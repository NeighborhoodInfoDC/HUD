1                                         The SAS System               12:25 Thursday, May 21, 2009

NOTE: Copyright (c) 2002-2003 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) 9.1 (TS1M3)
      Licensed to THE URBAN INSTITUTE, Site 0038838128.
NOTE: This session is executing on the XP_PRO  platform.



NOTE: SAS 9.1.3 Service Pack 4

NOTE: SAS initialization used:
      real time           2.51 seconds
      cpu time            0.14 seconds
      

NOTE: AUTOEXEC processing beginning; file is D:\Personal Settings\My SAS Files\V9\Autoexnt.sas.


NOTE: AUTOEXEC processing completed.

1          /**************************************************************************
2           Program:  Read_NSP2.sas
3           Library:  HUD
4           Project:  NeighborhoodInfo DC
5           Author:   P. Tatian
6           Created:  05/21/09
7           Version:  SAS 9.1
8           Environment:  Windows
9          
10          Description:  Read NSP2 tract data from HUD.
11         
12          Modifications:
13         **************************************************************************/
14         
15         %include "K:\Metro\PTatian\DCData\SAS\Inc\Stdhead.sas";
47        +
48        +options ls=124 ps=48;    ** Landscape **;
49        +
50        +** Output title **;
51        +
52        +title "&_library/&_program:  NeighborhoodInfo DC";
53        +
54        +** Define General library for local session only **;
55        +
56        +%DCData_lib( General, env=windows, macdef=dcautos uiautos sasautos )
MPRINT(DCDATA_LIB):   options nomprint;
NOTE: Libref GENERAV6 was successfully assigned as follows: 
2 The SAS System                                                                                12:25 Thursday, May 21, 2009

      Engine:        V6 
      Physical Name: D:\DCData\Libraries\General\Data
NOTE: Libref GENERAV8 was successfully assigned as follows: 
      Engine:        V8 
      Physical Name: D:\DCData\Libraries\General\Data
NOTE: Libref GENERAL was successfully assigned as follows: 
      Levels:           2
      Engine(1):        V8 
      Physical Name(1): D:\DCData\Libraries\General\Data
      Engine(2):        V6 
      Physical Name(2): D:\DCData\Libraries\General\Data

=====================================================================
Current FmtSearch Option value:

     WORK* LIBRARY* GENERAL

   *implicitly included by default.

=====================================================================
Status of current catalogs:

NOTE:    WORK.FORMATS DOES NOT EXIST
NOTE:    LIBRARY.FORMATS DOES NOT EXIST
NOTE:    GENERAL.FORMATS EXISTS
=====================================================================


=====================================================================
Current Sasautos Option value:

     GENERAL DCAUTOS UIAUTOS SASAUTOS

=====================================================================

57        +
NOTE: %INCLUDE (level 1) ending.
58         
59         ** Define libraries **;
60         %DCData_lib( HUD )
MPRINT(DCDATA_LIB):   options nomprint;
NOTE: Libref HUDV6 was successfully assigned as follows: 
      Engine:        V6 
      Physical Name: D:\DCData\Libraries\HUD\Data
NOTE: Libref HUDV8 was successfully assigned as follows: 
      Engine:        V8 
3 The SAS System                                                                                12:25 Thursday, May 21, 2009

      Physical Name: D:\DCData\Libraries\HUD\Data
NOTE: Libref HUD was successfully assigned as follows: 
      Levels:           2
      Engine(1):        V8 
      Physical Name(1): D:\DCData\Libraries\HUD\Data
      Engine(2):        V6 
      Physical Name(2): D:\DCData\Libraries\HUD\Data

=====================================================================
Current FmtSearch Option value:

     WORK* LIBRARY* GENERAL HUD

   *implicitly included by default.

=====================================================================
Status of current catalogs:

NOTE:    WORK.FORMATS DOES NOT EXIST
NOTE:    LIBRARY.FORMATS DOES NOT EXIST
NOTE:    GENERAL.FORMATS EXISTS
NOTE:    HUD.FORMATS EXISTS
=====================================================================


=====================================================================
Current Sasautos Option value:

     HUD GENERAL DCAUTOS UIAUTOS SASAUTOS

=====================================================================

61         
62         /** Macro Read_nsp2 - Start Definition **/
63         
64         %macro Read_nsp2( state= );
65         
66           filename fimport "d:\DCData\Libraries\HUD\Raw\NSP2-&state..csv" lrecl=1000;
67         
68           /*
69           proc import out=NSP2_DC
70               datafile=fimport
71               dbms=csv replace;
72             datarow=2;
73             getnames=yes;
74         
4 The SAS System                                                                                12:25 Thursday, May 21, 2009

75           run;
76           */
77         
78           data NSP2_&state;
79         
80             infile FIMPORT delimiter = ',' MISSOVER DSD  firstobs=2 ;
81                informat geo2000 $11. ;
82                informat sta $2. ;
83                informat cntyname $40. ;
84                informat nforeclose best32. ;
85                informat nvacancy best32. ;
86                informat fordq_num best32. ;
87                informat fordq_rate comma32. ;
88                informat vac_rate comma32. ;
89                informat num_mort_tract comma32. ;
90                informat pct_lchl comma32. ;
91                informat pct_hcll comma32. ;
92                informat pct_hchl comma32. ;
93                informat ofheo_price_change comma32. ;
94                informat pct_unem_2008 comma32. ;
95                informat unem_ch0708 comma32. ;
96         
97             input
98                         geo2000 $
99                         sta $
100                        cntyname $
101                        nforeclose
102                        nvacancy
103                        fordq_num
104                        fordq_rate
105                        vac_rate
106                        num_mort_tract
107                        pct_lchl
108                        pct_hcll
109                        pct_hchl
110                        ofheo_price_change
111                        pct_unem_2008
112                        unem_ch0708
113            ;
114        
115          run;
116        
117          proc sort data=NSP2_&state;
118            by geo2000;
119        
120          run;
5 The SAS System                                                                                12:25 Thursday, May 21, 2009

121        
122        %mend Read_nsp2;
123        
124        /** End Macro Definition **/
125        
126        %Read_nsp2( state=DC )
MPRINT(READ_NSP2):   filename fimport "d:\DCData\Libraries\HUD\Raw\NSP2-DC.csv" lrecl=1000;
MPRINT(READ_NSP2):   data NSP2_DC;
MPRINT(READ_NSP2):   infile FIMPORT delimiter = ',' MISSOVER DSD firstobs=2 ;
MPRINT(READ_NSP2):   informat geo2000 $11. ;
MPRINT(READ_NSP2):   informat sta $2. ;
MPRINT(READ_NSP2):   informat cntyname $40. ;
MPRINT(READ_NSP2):   informat nforeclose best32. ;
MPRINT(READ_NSP2):   informat nvacancy best32. ;
MPRINT(READ_NSP2):   informat fordq_num best32. ;
MPRINT(READ_NSP2):   informat fordq_rate comma32. ;
MPRINT(READ_NSP2):   informat vac_rate comma32. ;
MPRINT(READ_NSP2):   informat num_mort_tract comma32. ;
MPRINT(READ_NSP2):   informat pct_lchl comma32. ;
MPRINT(READ_NSP2):   informat pct_hcll comma32. ;
MPRINT(READ_NSP2):   informat pct_hchl comma32. ;
MPRINT(READ_NSP2):   informat ofheo_price_change comma32. ;
MPRINT(READ_NSP2):   informat pct_unem_2008 comma32. ;
MPRINT(READ_NSP2):   informat unem_ch0708 comma32. ;
MPRINT(READ_NSP2):   input geo2000 $ sta $ cntyname $ nforeclose nvacancy fordq_num fordq_rate vac_rate num_mort_tract 
pct_lchl pct_hcll pct_hchl ofheo_price_change pct_unem_2008 unem_ch0708 ;
MPRINT(READ_NSP2):   run;

NOTE: The infile FIMPORT is:
      File Name=d:\DCData\Libraries\HUD\Raw\NSP2-DC.csv,
      RECFM=V,LRECL=1000

NOTE: 188 records were read from the infile FIMPORT.
      The minimum record length was 69.
      The maximum record length was 99.
NOTE: The data set WORK.NSP2_DC has 188 observations and 15 variables.
NOTE: Compressing data set WORK.NSP2_DC decreased size by 0.00 percent. 
      Compressed is 4 pages; un-compressed would require 4 pages.
NOTE: DATA statement used (Total process time):
      real time           0.50 seconds
      cpu time            0.01 seconds
      

MPRINT(READ_NSP2):   proc sort data=NSP2_DC;
MPRINT(READ_NSP2):   by geo2000;
MPRINT(READ_NSP2):   run;
6 The SAS System                                                                                12:25 Thursday, May 21, 2009


NOTE: There were 188 observations read from the data set WORK.NSP2_DC.
NOTE: SAS sort was used.
NOTE: The data set WORK.NSP2_DC has 188 observations and 15 variables.
NOTE: Compressing data set WORK.NSP2_DC decreased size by 0.00 percent. 
      Compressed is 4 pages; un-compressed would require 4 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.15 seconds
      cpu time            0.00 seconds
      

127        %Read_nsp2( state=MD )
MPRINT(READ_NSP2):   filename fimport "d:\DCData\Libraries\HUD\Raw\NSP2-MD.csv" lrecl=1000;
MPRINT(READ_NSP2):   data NSP2_MD;
MPRINT(READ_NSP2):   infile FIMPORT delimiter = ',' MISSOVER DSD firstobs=2 ;
MPRINT(READ_NSP2):   informat geo2000 $11. ;
MPRINT(READ_NSP2):   informat sta $2. ;
MPRINT(READ_NSP2):   informat cntyname $40. ;
MPRINT(READ_NSP2):   informat nforeclose best32. ;
MPRINT(READ_NSP2):   informat nvacancy best32. ;
MPRINT(READ_NSP2):   informat fordq_num best32. ;
MPRINT(READ_NSP2):   informat fordq_rate comma32. ;
MPRINT(READ_NSP2):   informat vac_rate comma32. ;
MPRINT(READ_NSP2):   informat num_mort_tract comma32. ;
MPRINT(READ_NSP2):   informat pct_lchl comma32. ;
MPRINT(READ_NSP2):   informat pct_hcll comma32. ;
MPRINT(READ_NSP2):   informat pct_hchl comma32. ;
MPRINT(READ_NSP2):   informat ofheo_price_change comma32. ;
MPRINT(READ_NSP2):   informat pct_unem_2008 comma32. ;
MPRINT(READ_NSP2):   informat unem_ch0708 comma32. ;
MPRINT(READ_NSP2):   input geo2000 $ sta $ cntyname $ nforeclose nvacancy fordq_num fordq_rate vac_rate num_mort_tract 
pct_lchl pct_hcll pct_hchl ofheo_price_change pct_unem_2008 unem_ch0708 ;
MPRINT(READ_NSP2):   run;

NOTE: The infile FIMPORT is:
      File Name=d:\DCData\Libraries\HUD\Raw\NSP2-MD.csv,
      RECFM=V,LRECL=1000

NOTE: 1218 records were read from the infile FIMPORT.
      The minimum record length was 51.
      The maximum record length was 102.
NOTE: The data set WORK.NSP2_MD has 1218 observations and 15 variables.
NOTE: Compressing data set WORK.NSP2_MD decreased size by 29.17 percent. 
      Compressed is 17 pages; un-compressed would require 24 pages.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
7 The SAS System                                                                                12:25 Thursday, May 21, 2009

      cpu time            0.01 seconds
      

MPRINT(READ_NSP2):   proc sort data=NSP2_MD;
MPRINT(READ_NSP2):   by geo2000;
MPRINT(READ_NSP2):   run;

NOTE: There were 1218 observations read from the data set WORK.NSP2_MD.
NOTE: SAS sort was used.
NOTE: The data set WORK.NSP2_MD has 1218 observations and 15 variables.
NOTE: Compressing data set WORK.NSP2_MD decreased size by 29.17 percent. 
      Compressed is 17 pages; un-compressed would require 24 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

128        %Read_nsp2( state=VA )
MPRINT(READ_NSP2):   filename fimport "d:\DCData\Libraries\HUD\Raw\NSP2-VA.csv" lrecl=1000;
MPRINT(READ_NSP2):   data NSP2_VA;
MPRINT(READ_NSP2):   infile FIMPORT delimiter = ',' MISSOVER DSD firstobs=2 ;
MPRINT(READ_NSP2):   informat geo2000 $11. ;
MPRINT(READ_NSP2):   informat sta $2. ;
MPRINT(READ_NSP2):   informat cntyname $40. ;
MPRINT(READ_NSP2):   informat nforeclose best32. ;
MPRINT(READ_NSP2):   informat nvacancy best32. ;
MPRINT(READ_NSP2):   informat fordq_num best32. ;
MPRINT(READ_NSP2):   informat fordq_rate comma32. ;
MPRINT(READ_NSP2):   informat vac_rate comma32. ;
MPRINT(READ_NSP2):   informat num_mort_tract comma32. ;
MPRINT(READ_NSP2):   informat pct_lchl comma32. ;
MPRINT(READ_NSP2):   informat pct_hcll comma32. ;
MPRINT(READ_NSP2):   informat pct_hchl comma32. ;
MPRINT(READ_NSP2):   informat ofheo_price_change comma32. ;
MPRINT(READ_NSP2):   informat pct_unem_2008 comma32. ;
MPRINT(READ_NSP2):   informat unem_ch0708 comma32. ;
MPRINT(READ_NSP2):   input geo2000 $ sta $ cntyname $ nforeclose nvacancy fordq_num fordq_rate vac_rate num_mort_tract 
pct_lchl pct_hcll pct_hchl ofheo_price_change pct_unem_2008 unem_ch0708 ;
MPRINT(READ_NSP2):   run;

NOTE: The infile FIMPORT is:
      File Name=d:\DCData\Libraries\HUD\Raw\NSP2-VA.csv,
      RECFM=V,LRECL=1000

NOTE: 1541 records were read from the infile FIMPORT.
      The minimum record length was 46.
8 The SAS System                                                                                12:25 Thursday, May 21, 2009

      The maximum record length was 100.
NOTE: The data set WORK.NSP2_VA has 1541 observations and 15 variables.
NOTE: Compressing data set WORK.NSP2_VA decreased size by 30.00 percent. 
      Compressed is 21 pages; un-compressed would require 30 pages.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(READ_NSP2):   proc sort data=NSP2_VA;
MPRINT(READ_NSP2):   by geo2000;
MPRINT(READ_NSP2):   run;

NOTE: There were 1541 observations read from the data set WORK.NSP2_VA.
NOTE: SAS sort was used.
NOTE: The data set WORK.NSP2_VA has 1541 observations and 15 variables.
NOTE: Compressing data set WORK.NSP2_VA decreased size by 30.00 percent. 
      Compressed is 21 pages; un-compressed would require 30 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

129        
130        
131        data Hud.NSP2_all (label="HUD NSP2 tract data, DC/MD/VA");
132        
133          set NSP2_DC NSP2_MD NSP2_VA;
134            by geo2000;
135        
136          length ucounty $ 5;
137        
138          ucounty = geo2000;
139        
140          msa2003 = put( ucounty, ctym03f. );
141        
142          length cog $ 1;
143        
144          if ucounty in ( '11001', '24021', '24031', '24033', '51013', '51059', '51107',
145                          '51153', '51510', '51600', '51610', '51683', '51685' )
146            then cog = '1';
147          else cog = '0';
148        
149          informat _all_ ;
150        
151        run;
9 The SAS System                                                                                12:25 Thursday, May 21, 2009


NOTE: There were 188 observations read from the data set WORK.NSP2_DC.
NOTE: There were 1218 observations read from the data set WORK.NSP2_MD.
NOTE: There were 1541 observations read from the data set WORK.NSP2_VA.
NOTE: The data set HUD.NSP2_ALL has 2947 observations and 18 variables.
NOTE: Compressing data set HUD.NSP2_ALL decreased size by 28.81 percent. 
      Compressed is 42 pages; un-compressed would require 59 pages.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

152        
153        %File_info( data=Hud.NSP2_all, freqvars=sta msa2003 )
MPRINT(FILE_INFO):   title2 "File = Hud.NSP2_all";
MPRINT(FILE_INFO):   proc contents data=Hud.NSP2_all;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.59 seconds
      cpu time            0.04 seconds
      
NOTE: The PROCEDURE CONTENTS printed pages 1-2.

MPRINT(FILE_INFO):   proc print data=Hud.NSP2_all (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 10 observations read from the data set HUD.NSP2_ALL.
NOTE: The PROCEDURE PRINT printed page 3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   options nolabel;
MPRINT(FILE_INFO):   proc means data=Hud.NSP2_all n sum mean stddev min max;
MPRINT(FILE_INFO):   run;

NOTE: Multiple concurrent threads will be used to summarize data.
NOTE: There were 2947 observations read from the data set HUD.NSP2_ALL.
NOTE: The PROCEDURE MEANS printed page 4.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.14 seconds
      cpu time            0.00 seconds
10 The SAS System                                                                               12:25 Thursday, May 21, 2009

      

MPRINT(FILE_INFO):   options label;
MPRINT(FILE_INFO):   proc freq data=Hud.NSP2_all;
MPRINT(FILE_INFO):   tables sta msa2003 / missing;
MPRINT(FILE_INFO):   run;

NOTE: There were 2947 observations read from the data set HUD.NSP2_ALL.
NOTE: The PROCEDURE FREQ printed page 5.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.10 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   title2;
154        
155        proc freq data=Hud.NSP2_all;
156          tables msa2003 * cog * ucounty * cntyname / list nocum nopct;
157        run;

NOTE: There were 2947 observations read from the data set HUD.NSP2_ALL.
NOTE: The PROCEDURE FREQ printed page 6.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

158        
159        
160        data HUD.NSP2_cog (compress=no);
161        
162          set Hud.NSP2_all;
163          where cog = '1';
164        
165        run;

NOTE: There were 910 observations read from the data set HUD.NSP2_ALL.
      WHERE cog='1';
NOTE: The data set HUD.NSP2_COG has 910 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

166        

11 The SAS System                                                                               12:25 Thursday, May 21, 2009

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           5.21 seconds
      cpu time            0.31 seconds
      
